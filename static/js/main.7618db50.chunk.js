(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var i=n(48),c=n.n(i),o=n(13),a=n(11),r=(n(67),n(0)),s=n.n(r),l=n(5),j=n(26),d=n.n(j),u=n(1),b=function(){var e=Object(r.useContext)(a.b),t=e.isLoggedIn;return Object(u.jsxs)("header",{className:d.a.header,children:[Object(u.jsx)(o.b,{to:"/",children:Object(u.jsxs)("div",{className:d.a.logo,children:[Object(u.jsx)("img",{className:d.a.Img,src:"/image/logo3.png",alt:"logo"}),"Room Automation"]})}),Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:Object(u.jsx)("button",{children:Object(u.jsx)(o.b,{to:"/",children:"Home"})})}),!t&&Object(u.jsx)("li",{children:Object(u.jsx)("button",{children:Object(u.jsx)(o.b,{to:"/auth",children:"Login"})})}),t&&Object(u.jsx)("li",{children:Object(u.jsx)("button",{children:Object(u.jsx)(o.b,{to:"/profile",children:"DashBoard"})})}),t&&Object(u.jsx)("li",{children:Object(u.jsx)("button",{onClick:function(){e.logOut()},children:"Logout"})})]})})]})},h=function(e){return Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(b,{}),Object(u.jsx)("main",{children:e.children})]})},O=n(6),x=n(27),m=n.n(x),p=n(15),f=n.n(p),g=n(17),v=n.n(g);var _=function(e){var t=e.isOnline,n=s.a.useState(e.state),i=Object(O.a)(n,2),c=i[0],o=i[1],l=Object(r.useContext)(a.b);function j(n){var i;e.getData();var c=l.token,a=n.target.value,r=n.target.name;t?("On"===a?(i="https://api.sinric.pro/api/v1/devices/"+r+'/action?clientId=android-app&type=request&createdAt=1550493108338&action=setPowerState&value={"state": "On"}',o("On")):"Off"===a&&(i="https://api.sinric.pro/api/v1/devices/"+r+'/action?clientId=android-app&type=request&createdAt=1550493108338&action=setPowerState&value={"state": "Off"}',o("Off")),f()({method:"GET",url:i,headers:{Authorization:"Bearer "+[c],"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){if(200===e.status){var t="Turned "+a+" device.";v.a.fire({position:"center",icon:"success",title:[t],showConfirmButton:!1,timer:1500})}}))):v.a.fire({position:"center",icon:"error",title:"Devices are offline",showConfirmButton:!1,timer:1500})}return Object(u.jsxs)("div",{className:m.a.dev,children:[Object(u.jsx)("img",{src:"/image/device.jpg",alt:"device"}),Object(u.jsx)("h1",{children:e.title}),Object(u.jsxs)("div",{className:m.a.divSpan,children:["On"===c?Object(u.jsx)("span",{style:{color:"white",backgroundColor:"green"},children:"Switch is On"}):Object(u.jsx)("span",{style:{color:"white",backgroundColor:"red"},children:"Switch is Off"}),t?Object(u.jsx)("span",{style:{color:"white",backgroundColor:"green"},children:"Device is Online"}):Object(u.jsx)("span",{style:{color:"white",backgroundColor:"red"},children:"Device is Offline"})]}),Object(u.jsxs)("p",{children:["Device Id : ",e.id]}),Object(u.jsxs)("div",{className:m.a.devBtn,children:[Object(u.jsx)("button",{value:"On",name:e.id,onClick:j,children:"Turn On"}),Object(u.jsx)("button",{value:"Off",name:e.id,onClick:j,children:"Turn Off"})]})]})},w=n(50),S=n.n(w),k=function(e){var t=Object(r.useContext)(a.b),n=Object(r.useState)([]),i=Object(O.a)(n,2),c=i[0],o=i[1],s=Object(r.useState)(!0),l=Object(O.a)(s,2),j=l[0],d=l[1];function b(){d(!0)}var h=t.token;return j&&f()({method:"GET",url:"https://api.sinric.pro/api/v1/devices/",headers:{Authorization:"Bearer "+[h],"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){o(e.data.devices),d(!1)})),Object(u.jsx)("div",{className:S.a.control,children:c.map((function(e){return Object(u.jsx)(_,{id:e.id,getData:b,title:e.name,state:e.powerState,isOnline:e.isOnline},e.id)}))})},C=n(51),I=n.n(C),T=function(){return Object(u.jsxs)("section",{className:I.a.profile,children:[Object(u.jsx)("h2",{children:"DashBoard"}),Object(u.jsx)(k,{})]})},N=n(52),y=function(){return Object(u.jsx)(N.a,{})},D=n(57),A=n.n(D),P=function(){return Object(u.jsx)("section",{className:A.a.starting,children:Object(u.jsx)("h1",{children:"Welcome To Room Automation Project"})})},L=function(){return Object(u.jsx)(P,{})};var B=function(){var e=Object(r.useContext)(a.b);return Object(u.jsx)(h,{children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{path:"/",exact:!0,children:Object(u.jsx)(L,{})}),!e.isLoggedIn&&Object(u.jsx)(l.b,{path:"/auth",children:Object(u.jsx)(y,{})}),Object(u.jsxs)(l.b,{path:"/profile",children:[e.isLoggedIn&&Object(u.jsx)(T,{}),!e.isLoggedIn&&Object(u.jsx)(l.a,{to:"/auth"})]}),Object(u.jsx)(l.b,{path:"*",children:Object(u.jsx)(l.c,{to:"/"})})]})})};c.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(a.a,{children:Object(u.jsx)(o.a,{children:Object(u.jsx)(B,{})})}))},11:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i,c=n(6),o=n(0),a=n.n(o),r=n(1),s=a.a.createContext({token:"",isLoggedIn:!1,login:function(e){},logOut:function(){}}),l=function(e){var t=(new Date).getTime();return new Date(e).getTime()-t},j=function(e){var t,n=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expirationTime"),n=l(t);return n<=3600?(localStorage.removeItem("token"),localStorage.removeItem("expirationTime"),null):{token:e,duration:n}}();n&&(t=n.token);var a=Object(o.useState)(t),j=Object(c.a)(a,2),d=j[0],u=j[1],b=!!d,h=Object(o.useCallback)((function(){u(null),localStorage.removeItem("token"),localStorage.removeItem("expirationTime"),i&&clearTimeout(i)}),[]);Object(o.useEffect)((function(){n&&(console.log(n.duration),i=setTimeout(h,n.duration))}),[n,h]);var O={token:d,isLoggedIn:b,login:function(e,t){u(e),localStorage.setItem("token",e),localStorage.setItem("expirationTime",t);var n=l(t);i=setTimeout(h,n)},logOut:h};return Object(r.jsx)(s.Provider,{value:O,children:e.children})};t.b=s},12:function(e,t,n){e.exports={auth:"AuthForm_auth__jsnxL",control:"AuthForm_control__y6U-B",actions:"AuthForm_actions__3kKu0",toggle:"AuthForm_toggle__3KR7G",divIcon:"AuthForm_divIcon__1zWg1",icon:"AuthForm_icon__3XmPp",eye:"AuthForm_eye__3CqMN"}},26:function(e,t,n){e.exports={header:"MainNavigation_header__1C4qP",logo:"MainNavigation_logo__1u5KH",Img:"MainNavigation_Img__3sMbt"}},27:function(e,t,n){e.exports={dev:"Device_dev__tR9eF",devBtn:"Device_devBtn__1J53g",divSpan:"Device_divSpan__3PQ23"}},50:function(e,t,n){e.exports={control:"ProfileForm_control__18YJ6"}},51:function(e,t,n){e.exports={profile:"UserProfile_profile__1OJK-"}},52:function(e,t,n){"use strict";(function(e){var i=n(6),c=n(0),o=n(5),a=n(11),r=n(15),s=n.n(r),l=n(17),j=n.n(l),d=n(55),u=n.n(d),b=n(56),h=n.n(b),O=n(53),x=n.n(O),m=n(54),p=n.n(m),f=n(12),g=n.n(f),v=n(1);t.a=function(){var t=Object(o.g)(),n=Object(c.useRef)(),r=Object(c.useRef)(),l=Object(c.useContext)(a.b),d=Object(c.useState)(!0),b=Object(i.a)(d,2),O=b[0],m=b[1],f=Object(c.useState)(!0),_=Object(i.a)(f,2),w=_[0],S=_[1];return Object(v.jsxs)("section",{className:g.a.auth,children:[Object(v.jsx)("h1",{children:"Login"}),Object(v.jsxs)("form",{onSubmit:function(i){var c;i.preventDefault();var o=n.current.value,a=r.current.value;if(O){c="https://api.sinric.pro/api/v1/auth";var d="Basic "+new e.from(o+":"+a).toString("base64");s()({method:"POST",url:c,headers:{Authorization:d,"Content-Type":"application/x-www-form-urlencoded"},form:{client_id:"android-app"}}).then((function(e){var n=e.data,i=new Date((new Date).getTime()+10*+n.expiresIn);l.login(n.accessToken,i),t.replace("/")})).catch((function(e){j.a.fire({icon:"error",title:"Oops...",text:"Wrong Email or Password."})}))}else c="https://api.sinric.pro/api/v1/auth",s()({method:"POST",url:c,headers:{"x-sinric-api-key":a,"Content-Type":"application/x-www-form-urlencoded"},form:{client_id:"android-app"}}).then((function(e){var n=e.data;console.log(n);var i=new Date((new Date).getTime()+10*+n.expiresIn);l.login(n.accessToken,i),t.replace("/")})).catch((function(e){j.a.fire({icon:"error",title:"Oops...",text:"Wrong Email or Api key."})}))},children:[Object(v.jsxs)("div",{className:g.a.control,children:[Object(v.jsx)("label",{htmlFor:"email",children:"Your Email"}),Object(v.jsxs)("div",{className:g.a.divIcon,children:[Object(v.jsx)(x.a,{className:g.a.icon,sx:{fontSize:40}}),Object(v.jsx)("input",{type:"email",id:"email",required:!0,ref:n,autoComplete:"off"})]})]}),Object(v.jsxs)("div",{className:g.a.control,children:[Object(v.jsxs)("label",{htmlFor:"password",children:[" ",O?"Password":"API Key"]}),Object(v.jsxs)("div",{className:g.a.divIcon,children:[Object(v.jsx)(p.a,{className:g.a.icon,sx:{fontSize:40}}),Object(v.jsx)("input",{type:w?"password":"text",id:"password",required:!0,ref:r})]}),w?Object(v.jsx)(u.a,{onClick:function(){S(!1)},className:g.a.eye,sx:{fontSize:30}}):Object(v.jsx)(h.a,{onClick:function(){S(!0)},className:g.a.eye,sx:{fontSize:30}})]}),Object(v.jsxs)("div",{className:g.a.actions,children:[Object(v.jsx)("button",{children:"Login"}),Object(v.jsx)("button",{type:"button",className:g.a.toggle,onClick:function(){m((function(e){return!e}))},children:O?"Login With API key":"Login with Credential"})]})]})]})}}).call(this,n(40).Buffer)},57:function(e,t,n){e.exports={starting:"StartingPageContent_starting__1CxGL"}},67:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.7618db50.chunk.js.map